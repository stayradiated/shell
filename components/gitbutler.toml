name = 'gitbutler'
from = 'base'

# https://app.gitbutler.com/downloads/
version = '0.14.2-1544'

devDependencies = [ 'apteryx', 'wget' ]

build = """
UNSUFFIXED_VERSION=$(echo '{{VERSION}}' | sed 's/-.*//')

wget \
  -O /tmp/gitbutler.deb \
  "https://releases.gitbutler.com/releases/release/{{VERSION}}/linux/x86_64/GitButler_${UNSUFFIXED_VERSION}_amd64.deb"

#RUN

apteryx /tmp/gitbutler.deb
"""

exports = [
  "/usr/bin/gitbutler-git-askpass",
  "/usr/bin/gitbutler-git-setsid",
  "/usr/bin/gitbutler-tauri",
  "/usr/lib/x86_64-linux-gnu/",
]

[diff]
exclude = [
  "/etc/alternatives/x-cursor-theme",
  "/etc/dconf/",
  "/etc/dictionaries-common/",
  "/etc/emacs/",
  "/etc/fonts/",
  "/etc/glvnd/",
  "/etc/gtk-3.0/",
  "/etc/ld.so.cache",
  "/etc/pulse/",
  "/etc/sensors.d/",
  "/etc/sensors3.conf",
  "/etc/systemd/user/graphical-session-pre.target.wants/",
  "/etc/X11/xkb",
  "/etc/X11/Xsession.d/20dbus_xdg-runtime",
  "/usr/bin/bwrap",
  "/usr/bin/fc-cache",
  "/usr/bin/fc-cat",
  "/usr/bin/fc-conflist",
  "/usr/bin/fc-list",
  "/usr/bin/fc-match",
  "/usr/bin/fc-pattern",
  "/usr/bin/fc-query",
  "/usr/bin/fc-scan",
  "/usr/bin/fc-validate",
  "/usr/bin/gtk-update-icon-cache",
  "/usr/bin/ispell-wrapper",
  "/usr/bin/select-default-iwrap",
  "/usr/bin/session-migration",
  "/usr/bin/update-mime-database",
  "/usr/bin/xdg-dbus-proxy",
  "/usr/lib/aspell/",
  "/usr/lib/emacsen-common/",
  "/usr/lib/ispell/",
  "/usr/lib/sysctl.d/50-bubblewrap.conf",
  "/usr/lib/systemd/user/dbus.service",
  "/usr/lib/systemd/user/dbus.socket",
  "/usr/lib/systemd/user/dconf.service",
  "/usr/lib/systemd/user/glib-pacrunner.service",
  "/usr/lib/systemd/user/graphical-session-pre.target.wants/session-migration.service",
  "/usr/lib/systemd/user/session-migration.service",
  "/usr/lib/systemd/user/sockets.target.wants/",
  "/usr/libexec/dconf-service",
  "/usr/libexec/glib-pacrunner",
  "/usr/local/share/fonts/",
  "/usr/sbin/aspell-autobuildhash",
  "/usr/sbin/ispell-autobuildhash",
  "/usr/sbin/remove-default-ispell",
  "/usr/sbin/remove-default-wordlist",
  "/usr/sbin/select-default-ispell",
  "/usr/sbin/select-default-wordlist",
  "/usr/sbin/update-default-aspell",
  "/usr/sbin/update-default-ispell",
  "/usr/sbin/update-default-wordlist",
  "/usr/sbin/update-dictcommon-aspell",
  "/usr/sbin/update-dictcommon-hunspell",
  "/usr/sbin/update-icon-caches",
  "/usr/share/applications/GitButler.desktop",
  "/usr/share/apport/package-hooks/source_fontconfig.py",
  "/usr/share/bash-completion/completions/bwrap",
  "/usr/share/bug/bubblewrap",
  "/usr/share/bug/libegl-mesa0/",
  "/usr/share/bug/libegl1/",
  "/usr/share/bug/libgbm1/",
  "/usr/share/bug/libgl1-mesa-dri/",
  "/usr/share/bug/libgl1/",
  "/usr/share/bug/libglapi-mesa/",
  "/usr/share/bug/libgles2/",
  "/usr/share/bug/libglvnd0/",
  "/usr/share/bug/libglx-mesa0/",
  "/usr/share/bug/libglx0/",
  "/usr/share/bug/libgtk-3-0/",
  "/usr/share/dbus-1/services/ca.desrt.dconf.service",
  "/usr/share/dbus-1/services/org.gtk.GLib.PACRunner.service",
  "/usr/share/dict/README.select-wordlist",
  "/usr/share/dictionaries-common/",
  "/usr/share/doc-base/fontconfig.fontconfig-user",
  "/usr/share/doc-base/libpng16-16.libpng16",
  "/usr/share/doc-base/shared-mime-info.shared-mime-info",
  "/usr/share/doc/**",
  "/usr/share/drirc.d/",
  "/usr/share/emacsen-common/",
  "/usr/share/enchant-2/",
  "/usr/share/fonts/",
  "/usr/share/GConf/",
  "/usr/share/gettext/its/shared-mime-info.its",
  "/usr/share/gettext/its/shared-mime-info.loc",
  "/usr/share/glib-2.0/schemas/10_gsettings-desktop-schemas.gschema.override",
  "/usr/share/glib-2.0/schemas/gschemas.compiled",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.applications.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.interface.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.keyboard.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.magnifier.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.a11y.mouse.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.app-folders.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.background.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.calendar.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.datetime.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.default-applications.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.enums.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.input-sources.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.interface.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.lockdown.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.media-handling.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.notifications.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.peripherals.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.privacy.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.screensaver.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.search-providers.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.session.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.sound.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.thumbnail-cache.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.thumbnailers.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.wm.keybindings.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.desktop.wm.preferences.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.system.locale.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.system.location.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gnome.system.proxy.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gtk.Settings.ColorChooser.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gtk.Settings.Debug.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gtk.Settings.EmojiChooser.gschema.xml",
  "/usr/share/glib-2.0/schemas/org.gtk.Settings.FileChooser.gschema.xml",
  "/usr/share/glvnd/",
  "/usr/share/gst-plugins-base/",
  "/usr/share/gstreamer-1.0/",
  "/usr/share/hunspell/",
  "/usr/share/icons/Adwaita/",
  "/usr/share/icons/default/",
  "/usr/share/icons/hicolor/128x128/",
  "/usr/share/icons/hicolor/16x16/",
  "/usr/share/icons/hicolor/192x192/",
  "/usr/share/icons/hicolor/22x22/",
  "/usr/share/icons/hicolor/24x24/",
  "/usr/share/icons/hicolor/256x256@2/",
  "/usr/share/icons/hicolor/256x256/",
  "/usr/share/icons/hicolor/32x32/",
  "/usr/share/icons/hicolor/36x36/",
  "/usr/share/icons/hicolor/48x48/actions",
  "/usr/share/icons/hicolor/48x48/animations",
  "/usr/share/icons/hicolor/48x48/categories",
  "/usr/share/icons/hicolor/48x48/devices",
  "/usr/share/icons/hicolor/48x48/emblems",
  "/usr/share/icons/hicolor/48x48/emotes",
  "/usr/share/icons/hicolor/48x48/filesystems",
  "/usr/share/icons/hicolor/48x48/intl",
  "/usr/share/icons/hicolor/48x48/mimetypes",
  "/usr/share/icons/hicolor/48x48/places",
  "/usr/share/icons/hicolor/48x48/status",
  "/usr/share/icons/hicolor/48x48/stock/",
  "/usr/share/icons/hicolor/512x512/",
  "/usr/share/icons/hicolor/64x64/",
  "/usr/share/icons/hicolor/72x72/",
  "/usr/share/icons/hicolor/96x96/",
  "/usr/share/icons/hicolor/icon-theme.cache",
  "/usr/share/icons/hicolor/index.theme",
  "/usr/share/icons/hicolor/scalable/actions",
  "/usr/share/icons/hicolor/scalable/animations",
  "/usr/share/icons/hicolor/scalable/categories",
  "/usr/share/icons/hicolor/scalable/devices",
  "/usr/share/icons/hicolor/scalable/emblems",
  "/usr/share/icons/hicolor/scalable/emotes",
  "/usr/share/icons/hicolor/scalable/filesystems",
  "/usr/share/icons/hicolor/scalable/intl",
  "/usr/share/icons/hicolor/scalable/mimetypes",
  "/usr/share/icons/hicolor/scalable/places",
  "/usr/share/icons/hicolor/scalable/status",
  "/usr/share/icons/hicolor/scalable/stock/",
  "/usr/share/icons/hicolor/symbolic/",
  "/usr/share/icons/Humanity-Dark/",
  "/usr/share/icons/Humanity/",
  "/usr/share/icons/LoginIcons/",
  "/usr/share/icons/ubuntu-mono-dark/",
  "/usr/share/icons/ubuntu-mono-light/",
  "/usr/share/libdrm/",
  "/usr/share/libthai/",
  "/usr/share/lintian/**",
  "/usr/share/locale/",
  "/usr/share/man/**",
  "/usr/share/mime/",
  "/usr/share/perl5/Debian/DictionariesCommon.pm",
  "/usr/share/pkgconfig/adwaita-icon-theme.pc",
  "/usr/share/pkgconfig/shared-mime-info.pc",
  "/usr/share/pkgconfig/xkeyboard-config.pc",
  "/usr/share/session-migration/",
  "/usr/share/themes/",
  "/usr/share/upstart/",
  "/usr/share/X11/",
  "/usr/share/xml/fontconfig/",
  "/usr/share/zsh/vendor-completions/_bwrap",
  "/var/cache/debconf/config.dat",
  "/var/cache/debconf/templates.dat",
  "/var/cache/debconf/templates.dat-old",
  "/var/cache/dictionaries-common/",
  "/var/cache/fontconfig/",
  "/var/cache/ldconfig/aux-cache",
  "/var/lib/apt/extended_states",
  "/var/lib/apt/lists/**",
  "/var/lib/aspell/",
  "/var/lib/dictionaries-common/",
  "/var/lib/dpkg/**",
  "/var/lib/emacsen-common/",
  "/var/lib/ispell/",
  "/var/lib/systemd/deb-systemd-user-helper-enabled/graphical-session-pre.target.wants/",
  "/var/lib/systemd/deb-systemd-user-helper-enabled/session-migration.service.dsh-also",
  "/var/lib/ucf/hashfile.0",
  "/var/lib/ucf/hashfile.1",
  "/var/log/**"
]
