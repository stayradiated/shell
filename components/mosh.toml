name = "mosh"
from = "base"

version = "1.4.0-1ubuntu3"

devDependencies = ["apteryx"]

build = """
apteryx mosh='{{VERSION}}'
"""

exports = [
  "/usr/bin/mosh",
  "/usr/bin/mosh-client",
  "/usr/bin/mosh-server",
  "/usr/lib/x86_64-linux-gnu/libprotobuf.so.32",
  "/usr/lib/x86_64-linux-gnu/libprotobuf.so.32.0.12",
  "/usr/lib/x86_64-linux-gnu/libutempter.so.0",
  "/usr/lib/x86_64-linux-gnu/libutempter.so.1.2.1"
]

[diff]
exclude = [
  "/etc/ld.so.cache",
  "/etc/ufw/applications.d/mosh",
  # "/usr/bin/mosh",
  # "/usr/bin/mosh-client",
  # "/usr/bin/mosh-server",
  # "/usr/lib/x86_64-linux-gnu/libprotobuf.so.32",
  # "/usr/lib/x86_64-linux-gnu/libprotobuf.so.32.0.12",
  # "/usr/lib/x86_64-linux-gnu/libutempter.so.0",
  # "/usr/lib/x86_64-linux-gnu/libutempter.so.1.2.1",
  "/usr/lib/x86_64-linux-gnu/utempter/",
  "/usr/share/bash-completion/completions/mosh",
  "/usr/share/doc/libprotobuf32t64/",
  "/usr/share/doc/libutempter0/",
  "/usr/share/doc/mosh/",
  "/usr/share/lintian/overrides/libprotobuf32t64",
  "/usr/share/lintian/overrides/libutempter0",
  "/usr/share/man/man1/mosh-client.1.gz",
  "/usr/share/man/man1/mosh-server.1.gz",
  "/usr/share/man/man1/mosh.1.gz",
  "/var/cache/ldconfig/aux-cache",
  "/var/lib/apt/extended_states",
  "/var/lib/apt/lists/**",
  "/var/lib/dpkg/**",
  "/var/log/apt/**",
  "/var/log/dpkg.log"
]

[checkUpdates]
type = "github-release"
url = "https://github.com/blinksh/mosh-static-multiarch"
removePrefix = "v"
