name = 'obsidian'
from = 'base'

# https://obsidian.md/download
version = '1.8.9'

devDependencies = [
  'wget',
  'apteryx',
]

build = """
wget -O /tmp/obsidian.deb \
  "https://github.com/obsidianmd/obsidian-releases/releases/download/v{{VERSION}}/obsidian_{{VERSION}}_amd64.deb"

apteryx /tmp/obsidian.deb
"""

exports = [
  "/etc/alternatives/obsidian",
  "/opt/Obsidian/",
  "/usr/bin/obsidian",
  "/usr/lib/x86_64-linux-gnu/avahi/",
  "/usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/",
  "/usr/lib/x86_64-linux-gnu/gio/modules/giomodule.cache",
  "/usr/lib/x86_64-linux-gnu/gio/modules/libdconfsettings.so",
  "/usr/lib/x86_64-linux-gnu/gtk-3.0/",
  "/usr/lib/x86_64-linux-gnu/libatk-1.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libatk-1.0.so.0.25209.1",
  "/usr/lib/x86_64-linux-gnu/libatk-bridge-2.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libatk-bridge-2.0.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libatspi.so.0",
  "/usr/lib/x86_64-linux-gnu/libatspi.so.0.0.1",
  "/usr/lib/x86_64-linux-gnu/libavahi-client.so.3",
  "/usr/lib/x86_64-linux-gnu/libavahi-client.so.3.2.9",
  "/usr/lib/x86_64-linux-gnu/libavahi-common.so.3",
  "/usr/lib/x86_64-linux-gnu/libavahi-common.so.3.5.4",
  "/usr/lib/x86_64-linux-gnu/libcairo-gobject.so.2",
  "/usr/lib/x86_64-linux-gnu/libcairo-gobject.so.2.11800.0",
  "/usr/lib/x86_64-linux-gnu/libcairo.so.2",
  "/usr/lib/x86_64-linux-gnu/libcairo.so.2.11800.0",
  "/usr/lib/x86_64-linux-gnu/libcolord.so.2",
  "/usr/lib/x86_64-linux-gnu/libcolord.so.2.0.5",
  "/usr/lib/x86_64-linux-gnu/libcolordprivate.so.2",
  "/usr/lib/x86_64-linux-gnu/libcolordprivate.so.2.0.5",
  "/usr/lib/x86_64-linux-gnu/libcups.so.2",
  "/usr/lib/x86_64-linux-gnu/libdatrie.so.1",
  "/usr/lib/x86_64-linux-gnu/libdatrie.so.1.4.0",
  "/usr/lib/x86_64-linux-gnu/libdconf.so.1",
  "/usr/lib/x86_64-linux-gnu/libdconf.so.1.0.0",
  "/usr/lib/x86_64-linux-gnu/libdeflate.so.0",
  "/usr/lib/x86_64-linux-gnu/libepoxy.so.0",
  "/usr/lib/x86_64-linux-gnu/libepoxy.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libfontconfig.so.1",
  "/usr/lib/x86_64-linux-gnu/libfontconfig.so.1.12.1",
  "/usr/lib/x86_64-linux-gnu/libfreebl3.chk",
  "/usr/lib/x86_64-linux-gnu/libfreebl3.so",
  "/usr/lib/x86_64-linux-gnu/libfreeblpriv3.chk",
  "/usr/lib/x86_64-linux-gnu/libfreeblpriv3.so",
  "/usr/lib/x86_64-linux-gnu/libfreetype.so.6",
  "/usr/lib/x86_64-linux-gnu/libfreetype.so.6.20.1",
  "/usr/lib/x86_64-linux-gnu/libfribidi.so.0",
  "/usr/lib/x86_64-linux-gnu/libfribidi.so.0.4.0",
  "/usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0.4200.10",
  "/usr/lib/x86_64-linux-gnu/libgdk-3.so.0",
  "/usr/lib/x86_64-linux-gnu/libgdk-3.so.0.2409.32",
  "/usr/lib/x86_64-linux-gnu/libgraphite2.so.2.0.0",
  "/usr/lib/x86_64-linux-gnu/libgraphite2.so.3",
  "/usr/lib/x86_64-linux-gnu/libgraphite2.so.3.2.1",
  "/usr/lib/x86_64-linux-gnu/libgtk-3-0t64/",
  "/usr/lib/x86_64-linux-gnu/libgtk-3.so.0",
  "/usr/lib/x86_64-linux-gnu/libgtk-3.so.0.2409.32",
  "/usr/lib/x86_64-linux-gnu/libharfbuzz.so.0",
  "/usr/lib/x86_64-linux-gnu/libharfbuzz.so.0.60830.0",
  "/usr/lib/x86_64-linux-gnu/libjbig.so.0",
  "/usr/lib/x86_64-linux-gnu/libjpeg.so.8",
  "/usr/lib/x86_64-linux-gnu/libjpeg.so.8.2.2",
  "/usr/lib/x86_64-linux-gnu/liblcms2.so.2",
  "/usr/lib/x86_64-linux-gnu/liblcms2.so.2.0.14",
  "/usr/lib/x86_64-linux-gnu/libLerc.so.4",
  "/usr/lib/x86_64-linux-gnu/libnotify.so.4",
  "/usr/lib/x86_64-linux-gnu/libnotify.so.4.0.0",
  "/usr/lib/x86_64-linux-gnu/libnspr4.so",
  "/usr/lib/x86_64-linux-gnu/libnss3.so",
  "/usr/lib/x86_64-linux-gnu/libnssckbi.so",
  "/usr/lib/x86_64-linux-gnu/libnssdbm3.chk",
  "/usr/lib/x86_64-linux-gnu/libnssdbm3.so",
  "/usr/lib/x86_64-linux-gnu/libnssutil3.so",
  "/usr/lib/x86_64-linux-gnu/libpango-1.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libpango-1.0.so.0.5200.1",
  "/usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0.5200.1",
  "/usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0",
  "/usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0.5200.1",
  "/usr/lib/x86_64-linux-gnu/libpixman-1.so.0",
  "/usr/lib/x86_64-linux-gnu/libpixman-1.so.0.42.2",
  "/usr/lib/x86_64-linux-gnu/libplc4.so",
  "/usr/lib/x86_64-linux-gnu/libplds4.so",
  "/usr/lib/x86_64-linux-gnu/libpng16.so.16",
  "/usr/lib/x86_64-linux-gnu/libpng16.so.16.43.0",
  "/usr/lib/x86_64-linux-gnu/libsecret-1.so.0",
  "/usr/lib/x86_64-linux-gnu/libsecret-1.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libsharpyuv.so.0",
  "/usr/lib/x86_64-linux-gnu/libsharpyuv.so.0.0.1",
  "/usr/lib/x86_64-linux-gnu/libsmime3.so",
  "/usr/lib/x86_64-linux-gnu/libsoftokn3.chk",
  "/usr/lib/x86_64-linux-gnu/libsoftokn3.so",
  "/usr/lib/x86_64-linux-gnu/libssl3.so",
  "/usr/lib/x86_64-linux-gnu/libthai.so.0",
  "/usr/lib/x86_64-linux-gnu/libthai.so.0.3.1",
  "/usr/lib/x86_64-linux-gnu/libtiff.so.6",
  "/usr/lib/x86_64-linux-gnu/libtiff.so.6.0.1",
  "/usr/lib/x86_64-linux-gnu/libwayland-client.so.0",
  "/usr/lib/x86_64-linux-gnu/libwayland-client.so.0.22.0",
  "/usr/lib/x86_64-linux-gnu/libwayland-cursor.so.0",
  "/usr/lib/x86_64-linux-gnu/libwayland-cursor.so.0.22.0",
  "/usr/lib/x86_64-linux-gnu/libwayland-egl.so.1",
  "/usr/lib/x86_64-linux-gnu/libwayland-egl.so.1.22.0",
  "/usr/lib/x86_64-linux-gnu/libwebp.so.7",
  "/usr/lib/x86_64-linux-gnu/libwebp.so.7.1.8",
  "/usr/lib/x86_64-linux-gnu/libX11.so.6",
  "/usr/lib/x86_64-linux-gnu/libX11.so.6.4.0",
  "/usr/lib/x86_64-linux-gnu/libXau.so.6",
  "/usr/lib/x86_64-linux-gnu/libXau.so.6.0.0",
  "/usr/lib/x86_64-linux-gnu/libxcb-render.so.0",
  "/usr/lib/x86_64-linux-gnu/libxcb-render.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libxcb-shm.so.0",
  "/usr/lib/x86_64-linux-gnu/libxcb-shm.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libxcb.so.1",
  "/usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0",
  "/usr/lib/x86_64-linux-gnu/libXcomposite.so.1",
  "/usr/lib/x86_64-linux-gnu/libXcomposite.so.1.0.0",
  "/usr/lib/x86_64-linux-gnu/libXcursor.so.1",
  "/usr/lib/x86_64-linux-gnu/libXcursor.so.1.0.2",
  "/usr/lib/x86_64-linux-gnu/libXdamage.so.1",
  "/usr/lib/x86_64-linux-gnu/libXdamage.so.1.1.0",
  "/usr/lib/x86_64-linux-gnu/libXdmcp.so.6",
  "/usr/lib/x86_64-linux-gnu/libXdmcp.so.6.0.0",
  "/usr/lib/x86_64-linux-gnu/libXext.so.6",
  "/usr/lib/x86_64-linux-gnu/libXext.so.6.4.0",
  "/usr/lib/x86_64-linux-gnu/libXfixes.so.3",
  "/usr/lib/x86_64-linux-gnu/libXfixes.so.3.1.0",
  "/usr/lib/x86_64-linux-gnu/libXi.so.6",
  "/usr/lib/x86_64-linux-gnu/libXi.so.6.1.0",
  "/usr/lib/x86_64-linux-gnu/libXinerama.so.1",
  "/usr/lib/x86_64-linux-gnu/libXinerama.so.1.0.0",
  "/usr/lib/x86_64-linux-gnu/libxkbcommon.so.0",
  "/usr/lib/x86_64-linux-gnu/libxkbcommon.so.0.0.0",
  "/usr/lib/x86_64-linux-gnu/libXrandr.so.2",
  "/usr/lib/x86_64-linux-gnu/libXrandr.so.2.2.0",
  "/usr/lib/x86_64-linux-gnu/libXrender.so.1",
  "/usr/lib/x86_64-linux-gnu/libXrender.so.1.3.0",
  "/usr/lib/x86_64-linux-gnu/libXss.so.1",
  "/usr/lib/x86_64-linux-gnu/libXss.so.1.0.0",
  "/usr/lib/x86_64-linux-gnu/libXtst.so.6",
  "/usr/lib/x86_64-linux-gnu/libXtst.so.6.1.0",
]

[checkUpdates]
  type = 'github-release'
  url = 'https://github.com/obsidianmd/obsidian-releases'
  removePrefix = 'v'

[diff]
exclude = [
  "/etc/alternatives/open",
  "/etc/alternatives/open.1.gz",
  "/etc/alternatives/x-cursor-theme",
  "/etc/X11/Xreset*",
  "/etc/X11/Xresources/**",
  "/etc/X11/Xsession",
  "/etc/X11/Xsession.d/**",
  "/etc/X11/Xsession.options",
  "/etc/X11/rgb.txt",
  "/etc/X11/xkb",
  "/etc/X11/xkb/**",
  "/etc/X11/xorg.conf.d",
  "/etc/X11/xorg.conf.d/**",
  "/etc/dconf/**",
  "/etc/fonts/**",
  "/etc/gtk-3.0/**",
  "/etc/init.d/x11-common",
  "/etc/ld.so.cache",
  "/etc/rcS.d/S01x11-common",
  "/usr/bin/X11",
  "/usr/bin/browse",
  "/usr/bin/dbus-*",
  "/usr/bin/fc-*",
  "/usr/bin/gtk-update-icon-cache",
  "/usr/bin/open",
  "/usr/bin/update-mime-database",
  "/usr/bin/xdg-*",
  "/usr/include/X11",
  "/usr/include/X11/**",
  "/usr/lib/X11",
  "/usr/lib/X11/**",
  "/usr/lib/dbus-1.0/dbus-daemon-launch-helper",
  "/usr/lib/systemd/user/sockets.target.wants/**",
  "/usr/lib/systemd/user/**",
  "/usr/libexec/dconf-service",
  "/usr/local/share/fonts",
  "/usr/local/share/fonts/**",
  "/usr/sbin/update-icon-caches",
  "/usr/share/X11/",
  "/usr/share/applications/obsidian.desktop",
  "/usr/share/apport/package-hooks/source_fontconfig.py",
  "/usr/share/bug/**",
  "/usr/share/dbus-1/**",
  "/usr/share/doc-base/**",
  "/usr/share/doc/**",
  "/usr/share/fontconfig/",
  "/usr/share/fonts/**",
  "/usr/share/gettext/",
  "/usr/share/gettext/**",
  "/usr/share/glib-2.0/schemas/**",
  "/usr/share/gtk-3.0/",
  "/usr/share/icons/**",
  "/usr/share/libthai/",
  "/usr/share/lintian/**",
  "/usr/share/man/**",
  "/usr/share/mime/",
  "/usr/share/pkgconfig/**",
  "/usr/share/themes/",
  "/usr/share/xml/fontconfig/",
  "/var/cache/fontconfig/",
  "/var/cache/ldconfig/aux-cache",
  "/var/lib/apt/**",
  "/var/lib/dpkg/**",
  "/var/log/**",
]
